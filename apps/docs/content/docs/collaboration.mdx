---
title: Collaboration
status: published
author: alex
date: 7/24/2024
order: 6
keywords:
  - data
  - sync
  - persistence
  - database
  - multiplayer
  - collaboration
  - server
  - websockets
---

The tldraw SDK includes deep support for real-time collaboration. The easiest way to add collaboration to your project is through our [tldraw sync](#tldraw-sync) library. If you prefer to use something else, you can integrate [other backends](#Using-other-backends) using our other public APIs.

## tldraw sync

tldraw sync is a library for fast, multiuser collaboration. It's purpose-built for the tldraw canvas, and is in use on our flagship app tldraw.com to power the shared whiteboards there.

<div className="article__image" style={{ border: 'none' }}>
	<img
		alt="Multiplayer example using tldraw sync"
		src="/images/multiplayer.gif"
		style={{
			// learn this one weird trick for transparent animated gifs. doctors hate her!!!
			mask: 'url(/images/multiplayer_mask.png) luminance center 100% / 100% no-repeat',
			WebkitMask: 'url(/images/multiplayer_mask.png) luminance center 100% / 100% no-repeat',
		}}
	/>
</div>

### Using the tldraw sync demo

To make it easier to get started, we've included a "demo" hook in the sync library that connects to a hosted backend. You can see a working example at [this CodeSandbox](https://codesandbox.io/p/sandbox/tldraw-sync-demo-d9vq5g?file=%2Fsrc%2FApp.tsx%3A9%2C50).

Let's say you have an app running locally that looks like this:

```tsx
import { Tldraw } from 'tldraw'

function MyApp() {
	return <Tldraw />
}
```

To make this app collaborative, first install the `@tldraw/sync` library:

```bash
npm install @tldraw/sync
```

Back in your code, import the `useSyncDemo` hook from the `@tldraw/sync` library. In the `MyApp` component, call the `useSyncDemo` hook with a room ID. (Note that anyone using the same room ID will be accessing the same file, so pick a unique one.) Pass the [`store`](/docs/persistence#The-store-prop) returned by `useSyncDemo` to the tldraw component's `store` prop.

```tsx
import { Tldraw } from 'tldraw'
import { useSyncDemo } from '@tldraw/sync'

function MyApp() {
	const store = useSyncDemo({ roomId: 'my-unique-room-id' })
	return <Tldraw store={store} />
}
```

In your browser, open an incognito window and visit your project's URL. You can also use a different browser or different device. The key is the room ID: any apps connecting to the same room ID will enter into a shared collaboration session.

The sync demo is perfect for demos and prototyping but should not be used in production. Data on the demo server only lasts for up to 24 hours, and anyone using the same room id will be able to edit the same room's project. For production use you'll need to host your own server.

### Using tldraw sync in production

To use tldraw sync in production, you will need to self-host the tldraw sync server. We don't offer a hosted solution for tldraw sync, but if you're interested in that please let us know at hello@tldraw.com.

You will need to:

1. Host the tldraw sync server code, which serves the room over [WebSockets](https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API).
2. Configure a storage solution (e.g. a bucket) to store images, videos, and other user-created assets.
3. Connect to the server with the [`useSync`](?) hook.

#### Server

The `@tldraw/sync-core` package includes everything you need to self-host tldraw sync. You can host the server in any JavaScript environment that supports WebSockets and use whichever storage solution you like, so long as the client can connect to it.

We've created a [Cloudflare Workers template](https://github.com/tldraw/tldraw-sync-cloudflare) that you can use as a starting point or reference. This example is very similar to the system we use tldraw.com. It includes the sync server hosted by Cloudflare Workers, asset hosting through Cloudflare's R2 buckets, and some handlers for a few other server-side tasks.

For use in other environments, see our [simple server example](https://github.com/tldraw/tldraw/tree/main/apps/simple-server-example) for an example that supports both NodeJS and Bun.

<Callout icon="⚠️">
	When deploying your backend, you must ensure that the server is updated at the same time as the
	client, and that the new backend is up and running just before the new client rolls out. If the
	client has an older incompatible version, tldraw will display a "please refresh the page" message.
</Callout>

#### Client

Once you have your server set up, use the [`useSync`](?) hook from `@tldraw/sync` to connect your backend to the tldraw editor. Call the hook to create a store, then pass it in to the `<Tldraw />` component:

```tsx
import {useSync} from '@tldraw/sync'

const myAssetStore: TLAssetStore {
	upload(file, asset) {
		return uploadFileAndReturnUrl(file)
	},
	resolve(asset) {
		return asset.props.src
	},
}

function MyApp() {
	const store = useSync({
		uri: 'https://yourapp.com/<PATH TO YOUR ROOM>',
		assets: myAssetStore,
	})

	return <Tldraw store={store} />
}

```

You can see a complete example using the sync client in the [`tldraw-sync-cloudflare`](https://github.com/tldraw/tldraw/blob/main/templates/sync-cloudflare/client/App.tsx) template.

## Using other collaboration backends

While tldraw sync is our recommended and best-supported backend for tldraw, we designed the SDK to work with any data solution. If you cannot use tldraw sync, or if you have an existing real-time collaboration solution that you prefer to use instead, you can integrate your backend with tldraw using our public APIs.

As a reference, see our [tldraw-yjs example](https://github.com/tldraw/tldraw-yjs-example) that shows an integration between tldraw and the [Yjs](https://yjs.dev) CRDT library. If you are connecting a different backend, you will likely follow similar patterns.

For information about how to synchronize the store with other processes, i.e. how to get data out and put data in, including from remote sources, see the [Persistence](/docs/persistence) page.

### Creating assets

As well as synchronizing the rapidly-changing document data, tldraw also needs a way to store and retrieve large binary assets like images or videos. You'll need to make sure your backend can handle asset uploads and downloads, and implement a service for turning files and links into assets that the editor can use.

```tsx
<Tldraw
	store={store}
	onMount={(editor) => {
		editor.registerExternalAssetHandler('file', createAssetFromFile)
		editor.registerExternalAssetHandler('url', createAssetFromUrl)
	}}
/>
```

- Read about [how assets work in tldraw](/docs/assets).
- Read the [`TLAssetStore`](?) reference docs.

You can also refer to our simple example [client](https://github.com/tldraw/tldraw/blob/main/apps/simple-server-example/src/client/App.tsx) and [server](https://github.com/tldraw/tldraw/blob/main/apps/simple-server-example/src/server/unfurl.ts) code.

## Collaboration UI

The `tldraw` library includes several components specifically designed for collaboration.

- Collaborator cursors: [`TLComponents#CollaboratorCursor`](?)
- Cursor chat: [`TLComponents#CursorChatBubble`](?)
- Offline indicator: [`TLComponents#TopPanel`](?)
- Collaborator list: [`TLComponents#SharePanel`](?)

The `@tldraw/sync` client automatically enables some default collaborative UX, but you can remove, replace, or customize these using the editor's components prop. See [TLComponents](?) for more info.
